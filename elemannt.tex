\documentclass[12pt,]{extbook}

\usepackage{amsmath,amssymb,amsthm}
\usepackage{subfiles}
\usepackage{hyperref}
\hypersetup{pdfstartview=,pdfencoding=auto,}
\usepackage[style=verbose,backend=biber,sortcites=true]{biblatex}
\addbibresource[]{ref.bib}

\usepackage{xifthen,fancyhdr,centernot,datetime}
\usepackage[intoc]{nomencl}

\usepackage[toc,nopostdot,nonumberlist,style=long,automake,acronym]{glossaries}
\usepackage{makeidx}
\usepackage{pdfpages}
\usepackage{iftex}
\usepackage{xstring}

\ifxetex
	%\usepackage{mathspec}
	\usepackage[no-math]{fontspec}
	\usepackage{unicode-math}
\else
	\usepackage[LGR,T2A,LY1]{fontenc}
	\usepackage{OldStandard}
	\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,]{microtype}
	\usepackage{pdfrender, xcolor}
\fi
% ö,ő,Ü

\renewcommand{\nomname}{Notations}
\makenomenclature
\glstoctrue
\subfile{glossary.tex}
\makeindex
\makeglossaries

%\setlength{\textwidth}{360pt}
%\setlength{\textheight}{615pt}
\setlength{\textwidth}{6.5in}
\setlength{\oddsidemargin}{.1in}
\setlength{\evensidemargin}{.1in}
\setlength{\topmargin}{-.1in}
\setlength{\textheight}{8.4in}

\newcommand{\lcm}{\mbox{lcm}}

\ifpdftex
	\microtypecontext{spacing=nonfrench}
	\pdfrender{StrokeColor=black,TextRenderingMode=2,LineWidth=0.2pt}
	\makeatletter\let\normalrender\PdfRender@NormalColorHook\let\PdfRender@NormalColorHook\@empty\newcommand*{\textnormalrender}[1]{\begingroup\normalrender#1\endgroup}\makeatother
\else
	\setmainfont[FakeBold=1,BoldFont=OldStandard-Bold.otf,ItalicFont=ModernMT-ExtendedItalic.otf,BoldItalicFont=ModernMTStd-BoldItalic.otf,SmallCapsFont=OldStyleSeven-SC.otf]{ModernMT-Extended.otf}
	\setsansfont[%
	FakeBold=1,ItalicFont=NewCMSans10-Oblique.otf,BoldFont=NewCMSans10-Bold.otf,BoldItalicFont=NewCMSans10-BoldOblique.otf,
	SmallCapsFeatures={Numbers=OldStyle}]{NewCMSans10-Regular.otf}
	
	\setmonofont[%
	FakeBold=1,ItalicFont=NewCMMono10-Italic.otf,BoldFont=NewCMMono10-Bold.otf,BoldItalicFont=NewCMMono10-BoldOblique.otf,SmallCapsFeatures={Numbers=OldStyle}]{NewCMMono10-Regular.otf}
	\setmathfont[FakeBold=1,BoldFont={XITSMath-Bold.otf}]{NewCMMath-Book.otf}
	\setmathfont[range=it,FakeBold=1]{Old Standard Italic}
	\setmathfont[range={\prod},Scale=1.2]{STIX Two Math}
	\setmathfont[range={\sum},Scale=1.3,FakeBold=0]{STIX Two Math}
	% texgyrepagella-math.otf
	%\newfontfamily{\stm}{STIXMath-Regular.otf}
	%\makeatletter
	%\RenewDocumentCommand{\sum@}{}{\DOTSB\baskervillesum}
	%\AtBeginDocument{\RenewDocumentCommand{\sum}{}{\mathop{\sum@}\slimits@}}
	%\NewDocumentCommand{\baskervillesum}{}{%
	%	\mathchoice
	%	{\makebaskervillesum{2.6}}% displaystyle
	%	{\makebaskervillesum{1.5}}% textstyle
	%	{\makebaskervillesum{1}}% scriptstyle
	%	{\makebaskervillesum{0.7}}% scriptscriptstyle
	%}
	%\NewDocumentCommand{\makebaskervillesum}{m}{\vcenter{\hbox{\scalebox{#1}{\stm Σ}}}}
	
	\newfontfamily{\minion}{ModernMTStd-BoldItalic.otf}[NFSSFamily=pmn]
	\DeclareSymbolFont{alphabets}{\encodingdefault}{pmn}{m}{it}
	\SetSymbolFont{alphabets}{bold}{T1}{pmn}{b}{it}
	\DeclareMathSymbol{f}{\mathalpha}{alphabets}{"66}
	
	\newcommand{\getsc}[1]{%
		\StrLeft{#1}{1}[\headtoken]%
		\StrGobbleLeft{#1}{1}[\tailtokens]%
		\MakeUppercase{\headtoken\scriptsize\tailtokens}%
	}
\fi

\ifxetex
	\newtheorem{theorem}{\textbf{\getsc{Theorem}}}[chapter]
\else
	\newtheorem{theorem}{\textbf{\textsc{Theorem}}}[chapter]
\fi
\theoremstyle{definition}
\newenvironment{definition}[1][]{\par\medskip\noindent \textbf{\ifthenelse{\isempty{#1}}{Definition.}{#1.}} \rmfamily}{\medskip}
\newtheorem*{remark}{Remark}


\title{\bfseries Introduction to Elementary Analytic Number Theory}
\ifxetex
	\author{\Large\textbf{\getsc{Masum} \getsc{Billal}}}
\else
	\author{\Large\textbf{\textsc{Masum Billal}}}
\fi

\renewcommand*{\chapterautorefname}{Chapter}
\renewcommand*{\sectionautorefname}{Section}
\renewcommand{\theequation}{$\ddagger$\ \thechapter.\arabic{equation}}
\interfootnotelinepenalty=10000

\pagestyle{fancyplain}
\fancyhf{}
%\fancyhead[C]{\rule{.5\textwidth}{4\baselineskip}}
\setlength{\headheight}{52pt}

%\fancyhead[RE]{\textit{\nouppercase{\leftmark}}}
\ifpdftex
	\fancyhead[LO, RE]{\small\textsc{Masum Billal}}
\else
	\fancyhead[LO,RE]{\small\getsc{Masum} \getsc{Billal}}
\fi
\fancyhead[LE]{$\S$\thechapter}
\fancyhead[RO]{$\S$\thesection}
\fancyfoot[LE, RO]{Page\ \thepage}
\renewcommand{\headrulewidth}{.1pt} % remove lines as well
\renewcommand{\footrulewidth}{.1pt}

\begin{document}
	%\pagestyle{empty}
    \includepdf[pages={-1}]{cover.pdf}
    \maketitle
    \frontmatter
    \tableofcontents
    \subfile{nomencl.tex}
    \printnomenclature
    \mainmatter
    %\pagestyle{fancyplain}
    \begin{refsection}
		\subfile{arith.tex}
        \printbibliography[heading=bibintoc]
    \end{refsection}

	\begin{refsection}
		\subfile{dirichlet.tex}
	\end{refsection}

	\begin{refsection}
		\subfile{tchebycheff.tex}
	\end{refsection}

	\begin{refsection}
		\subfile{dirichletprime.tex}
	\end{refsection}

	\begin{refsection}
		\subfile{prime.tex}
	\end{refsection}

	\begin{refsection}
		\subfile{sieve.tex}
	\end{refsection}
    \backmatter
    \printglossary[type=\acronymtype,title={List of Acronyms}]
    \printglossary[title=Glossary,]
    \printindex
\end{document}