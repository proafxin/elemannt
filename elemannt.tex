\documentclass[12pt,leqno]{book}

\usepackage{amsmath,amssymb,amsthm,etoolbox}
\usepackage[left=.8in,right=.8in,top=.5in,]{geometry}
\usepackage{xcolor,color,fancyhdr,}
\usepackage{subfiles}

\usepackage{enumerate}

\usepackage{hyperref,titlesec,xifthen,iftex,authoraftertitle,}
\usepackage[bibstyle=philosophy-modern,citestyle=philosophy-verbose,backend=biber,autopunct,sortcites,]{biblatex}

\hypersetup{linktocpage,unicode,pdfencoding=auto,pdfstartview=,allcolors=black,anchorcolor=black,allbordercolors=black,hidelinks}
\DeclareNameAlias{sortname}{given-family}
\interfootnotelinepenalty=10000

\ifxetex
	\usepackage{titletoc,tocloft,fmtcount}
	%\renewcommand{\thechapter}{\NUMBERstring{chapter}}
	\renewcommand{\chaptername}{CHAPTER}
	\renewcommand{\contentsname}{\parbox{\linewidth}{\centerline{\LARGE CONTENTS}~\\[-1.5cm]}}
	
	\renewcommand{\thesection}{$\S$\Roman{section}\hspace{.1em}:\hspace{.2em}}
	%\addtolength{\cftchapnumwidth}{70pt}
	\addtolength{\cftsecnumwidth}{30pt}
	
	\makeatletter
	\renewcommand*\l@chapter[2]{%
		\ifnum \c@tocdepth >\m@ne\relax
		\addpenalty{-\@highpenalty}%
		\addvspace{1.0em \@plus\p@}%
		\setlength\@tempdima{3em}%
		\begingroup
		\def\numberline##1{\titlefont\Large\xdef\@chapternumber{##1}}%
		\setbox0=\vbox{\centering\strut #1}% Could be more than one line
		\centering
		\leavevmode
		\hyperlink{\Hy@tocdestname}{\small\vspace{.5\baselineskip}\bfseries \chaptername\hspace{.5em}\@chapternumber}\\
		\unvbox0
		\par
		\nobreak
		\global\@nobreaktrue
		\everypar{\global\@nobreakfalse\everypar{}}%
		\endgroup
		\fi}
	\makeatother
	
	\usepackage{unicode-math}
	\newcommand{\fakebold}{1.5}
	\newcommand{\fakestretch}{.95}
	\newcommand{\scale}{1.}
	\newcommand{\fakemathbold}{1.5}
	\setmainfont[FakeBold=\fakebold,ItalicFont=ModernMT-ExtendedItalic-New.otf,BoldItalicFont=ModernMT-ExtendedItalic-New.otf,SmallCapsFont={OldStandard-Regular.otf},SmallCapsFeatures={Letters=SmallCaps,RawFeature=+smcp,Scale=\scale,FakeStretch=\fakestretch},BoldFont=TheanoModern-Bold.otf,BoldFeatures={,Scale=\scale,SmallCapsFont=OldStandard-Bold.otf,SmallCapsFeatures={RawFeature=+smcp,Scale=\scale},FakeStretch=\fakestretch},BoldItalicFeatures={FakeBold=3},Scale=\scale,FakeStretch=\fakestretch]{ModernMT-Extended-New.otf}
	\setsansfont[FakeBold=1,Scale=\scale,FakeStretch=\fakestretch]{Latin Modern Sans}
	\setmonofont[FakeBold=1,Scale=\scale,FakeStretch=\fakestretch]{Latin Modern Mono}
	\setmathfont[,Scale=\scale,FakeStretch=\fakestretch]{NewCMMath-Regular.otf}% KpMath-Regular.otf,KpMath-Light.otf
	
	\setmathfont[range={it,},Scale=\scale,FakeStretch=\fakestretch,FakeBold=\fakemathbold]{ModernMT-ExtendedItalic-New.otf}
	\setmathfont[range={up,},Scale=\scale,FakeStretch=\fakestretch,FakeBold=\fakemathbold]{ModernMT-Extended-New.otf}
	\setmathfont{latinmodern-math.otf}[range={bfup,},Scale=\scale,FakeStretch=\fakestretch,FakeBold=\fakemathbold]
	\setmathfont{NewCMMath-Regular.otf}[range={"0028,"0029,"005B,"005D,"2308-"230B,"005B,"005D,"003A,"003B,"002C,\symfrak,"003D,bb,},FakeStretch=1.1\fakestretch]% NewCMMath-Regular.otf,texgyrepagella-math.otf
	\setmathfont{NewCMMath-Book.otf}[range={bb},Scale=\scale,FakeStretch=\fakestretch,FakeBold=\fakemathbold]
	%\setmathfont{OldStandard-Regular.otf}[range={"2264-"2267,"003C-"003E,"00A7,},FakeBold=\fakemathbold,]
	\setmathfont{ModernMT-ExtendedItalic-New.otf}[range={,"2264-"2265,"003C,"003E},FakeStretch=1.15\fakestretch,Scale=1.]
	\setmathfont{ModernMT-ExtendedItalic-New.otf}[range={"00A7,"003D,},FakeStretch=1.1\fakestretch,Scale=1.2]
	%\newfontfamily\titlefont{TheanoModern-Bold.otf}[FakeBold=0]
	\newfontfamily{\sumfont}{ModernMT-ExtendedItalic-New.otf}[]% GFSSolomos.otf,lmroman17-regular.otf,lmromanslant17-regular.otf,Theano Didot Regular V1.otf
	\makeatletter
	\RenewDocumentCommand{\sum@}{}{\DOTSB\baskervillesum}
	\AtBeginDocument{%
		\RenewDocumentCommand{\sum}{}{\mathop{\sum@}\slimits@}%
	}
	\NewDocumentCommand{\baskervillesum}{}{%
		\mathchoice
		{\makebaskervillesum{2}}% displaystyle
		{\makebaskervillesum{1.5}}% textstyle
		{\makebaskervillesum{1}}% scriptstyle
		{\makebaskervillesum{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervillesum}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\sumfont Σ}}}%
	}
	\newfontfamily{\prodfont}{ModernMT-ExtendedItalic-New.otf}[FakeStretch=\fakestretch]%OldStandard-Italic.otf,ModernExtT-Theano.otf
	\makeatletter
	\RenewDocumentCommand{\prod@}{}{\DOTSB\baskervilleprod}
	\AtBeginDocument{%
		\RenewDocumentCommand{\prod}{}{\mathop{\prod@}\slimits@}%
	}
	\NewDocumentCommand{\baskervilleprod}{}{%
		\mathchoice
		{\makebaskervilleprod{2}}% displaystyle
		{\makebaskervilleprod{1.5}}% textstyle
		{\makebaskervilleprod{1}}% scriptstyle
		{\makebaskervilleprod{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervilleprod}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\prodfont ∏}}}%
	}
	\newfontfamily\intfont{ModernMT-Extended-New.otf}[FakeBold=0]% OldStandard-Italic.otf,latinmodern-math.otf,Erewhon-Math.otf
	\makeatletter
	\NewDocumentCommand{\int@}{}{\DOTSB\baskervilleint}
	\AtBeginDocument{%
		\RenewDocumentCommand{\int}{}{\mathop{\int@}\slimits@}%
	}
	\NewDocumentCommand{\baskervilleint}{}{%
		\mathchoice
		{\makebaskervilleint{2.2}}% displaystyle
		{\makebaskervilleint{1.6}}% textstyle
		{\makebaskervilleint{1}}% scriptstyle
		{\makebaskervilleint{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervilleint}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\intfont ∫}}}%
	}
	\newfontfamily\titlefont{ModernMT-Extended-New.otf}[FakeBold=1,UprightFeatures={Letters=Uppercase},]
	\defaultfontfeatures{Mapping=tex-text,Ligatures=Tex}
\else
	\usepackage{pdfrender, xcolor}
	\usepackage[T1,]{fontenc}
	\usepackage{relsize}
	%\usepackage[varg]{txfonts}
	%\usepackage{OldStandard}
	\usepackage{baskervillef}
	\usepackage[baskervillef]{newtxmath}
	%\usepackage[charter]{mathdesign}
	%\def\rmdefault{bch} % not scaled
	%\def\ttdefault{blg}
	\pdfrender{StrokeColor=black,TextRenderingMode=2,LineWidth=0.4pt}
	\makeatletter\let\normalrender\PdfRender@NormalColorHook\let\PdfRender@NormalColorHook\@empty\newcommand*{\textnormalrender}[1]{\begingroup\normalrender#1\endgroup}\makeatother
\fi

\usepackage[nopostdot,automake=true,nonumberlist,order=word]{glossaries}
\usepackage{makeidx}

\usepackage{nomencl}
\renewcommand{\nomname}{Notations}
\makenomenclature
\makeindex
\makeglossaries

\titleformat{\chapter}[display]{\bfseries\scshape\Huge}{}{1ex}{\centering\titlerule\vspace{1ex}\ifthenelse{\value{chapter}>0}{}{}}[\vspace{1ex}\titlerule]
\titleformat{\section}[display]{\bfseries\scshape\LARGE}{}{1ex}{\centering\ifthenelse{\value{section}>0}{\thesection\;}{}}[\titlerule]
%\titleformat{\subsection}[display]{\bfseries\scshape\Large}{}{1ex}{\centering\ifthenelse{\value{section}>0}{$\S\S$\thesubsection\;}{}}[\titlerule]

\newtheorem{theorem}{\textsc{\textbf{Theorem}}}
\theoremstyle{definition}
\newenvironment{definition}[1][]{\par\medskip\noindent \textsc{\textbf{{\ifthenelse{\isempty{#1}}{Definition.}{#1.}}}} \rmfamily}{\medskip}

\newcommand{\floor}[1]{\left\lfloor{#1}\right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil{#1}\right\rceil}
\newcommand{\parenthesis}[1]{\left(#1\right)}
\newcommand{\curlybrace}[1]{\left\{#1\right\}}
\newcommand{\squarebracket}[1]{\left[#1\right]}
\newcommand{\bigo}[1]{O\parenthesis{#1}}
\DeclareMathOperator{\ord}{ord}
\newcommand{\F}[1]{\mathbb{F}_{#1}}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}

\renewcommand*{\chapterautorefname}{Chapter}
\renewcommand*{\sectionautorefname}{Section}
\renewcommand*{\subsectionautorefname}{Subsection}
%\numberwithin{equation}{part}
\renewcommand{\theequation}{$\ddagger$\arabic{equation}}
\renewcommand{\thepart}{\arabic{chapter}}

\renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
\renewcommand{\sectionmark}[1]{\markboth{#1}{#1}}
\usepackage{extramarks}
\AtBeginEnvironment{theorem}{\addtocounter{theorem}{1}%
	\extramarks{\thetheorem}{}\addtocounter{theorem}{-1}}

\fancypagestyle{fancy}{
	\fancyhf{}
	\fancyhead[L]{\ifthenelse{0\firstleftxmark=0}
		{}% no theorems yet, so no header
		{\ifthenelse{\equal{\firstleftxmark}{\lastleftxmark}}
			{\textit{Theorem} \firstleftxmark}% Only one theorem on the page
			{\textit{Theorems} \firstleftxmark–\lastleftxmark}}}
	\fancyhead[CE]{\small\itshape \MyAuthor}
	\fancyhead[R]{\thepage}
	\fancyhead[CO]{\small\itshape Chapter \arabic{chapter},\hspace{.4em}\thesection\hspace{.1em}\nouppercase\rightmark}
}
%\setlength{\headheight}{30pt}

\newtheorem*{remark}{\textit{Remark}}

\defbibfilter{books}{type=book or type=inbook}

\usepackage{graphicx,}

\addbibresource{ref.bib}
\subfile{glossary.tex}

\author{Masum Billal}

\newcommand{\wb}[2]{\fontsize{#1}{#2}\usefont{U}{webo}{xl}{n}}
\newcommand{\wbc}[3]{\vspace*{#1}\begin{center}
		\wb{#2}{#2}#3\end{center}\vspace*{#1}}

\begin{document}
	\ifpdftex
		\relscale{1.2}
	\fi
	\pagestyle{empty}
	\begin{titlepage}
		\centering
		\vspace*{2\baselineskip}
		{\fontsize{30}{10}\ifxetex\titlefont\fi E\hspace{.1em}L\hspace{.1em}E\hspace{.1em}M\hspace{.1em}E\hspace{.1em}N\hspace{.1em}T\hspace{.1em}A\hspace{.1em}R\hspace{.1em}Y\\\vspace{.3in} ANALYTIC\hspace{.3em}NUMBER\hspace{.3em} THEORY}\\[2\baselineskip]
		\ifxetex
			\scalebox{8}[1]{{\wb{10}{12}4}}
			\\[2\baselineskip]
		\fi
		{BY}\\[\baselineskip]
		{\fontsize{20}{10}\hspace{.5em}\ifxetex\titlefont\fi MASUM\hspace{.5em}BILLAL}\\[\baselineskip]
		\ifxetex
			{\wb{10}{12}4}\\[2\baselineskip]
		\fi
		%{\Large\itshape with a Commentary by}\\[\baselineskip]
		%{\Large A N OTHER}\par
		\vfill
		\ifxetex
			\scalebox{8}[1]{{\wb{10}{12}4}}
			\\[\baselineskip]
		\fi
		\vfill
		{\Large AMS Chelsea Publishing}\\
		{\includegraphics[scale=.5]{logo.png}}\par
	\end{titlepage}
	%\maketitle
	\section*{Preface}
	While analytic number theory is a very broad subject and there are a great many books on this topic, there are not many books that are truly introductory. There are some that are introductory enough such as \textcite{apostol_1976} but they usually depend on abstract algebra and complex analysis heavily. In contrast to that, it can be argued that both topics are entirely excluded from this book. Thus, the primary objective of this book is to discuss analytic number theory in the most \textit{elementary} way possible. Before I explain what I mean by elementary, I will mention a few more details.
		\begin{enumerate}[(1)]
			\item I neither discuss class number of quadratic forms nor do I follow \textcite[Part Two, Chapter III]{landau_1969} to prove that $L(1,\chi)\neq0$ for real non-principal Dirichlet character $\chi$. Therefore, one of the two proofs I present for Dirichlet's prime number theorem is a mixture of the approach taken by \textcite[Part two, Chapter III, $\S$3]{landau_1969} and \textcite[Chapter VI]{apostol_1976}. Thus, we avoid the unnecessary bulky calculation presented by \textcite[Theorem 152]{landau_1969} while still keeping the proof of Dirichlet's theorem completely elementary. The other proof is due to \textcite{selberg_1949}. Both will be included in \autoref{ch:legendre}.
			\item I will treat the reader to a topic I consider to be bittersweet--\textit{Sieve Theory}. However, I will only discuss Brun's theorem on prime pairs and the idea behind Selberg's sieve; the reason being that I primarily intend to lay the groundwork for a solid foundation. One can consult \textcite{cojocaru_murty_2006} and \textcite{friedlander_iwaniec_2010} after reading this chapter. If I only discuss a lot of sieving techniques and prove a lot of theorems, that may cause a lack of sense in the mind of the reader as to why such methods are necessary and what leads one to think in such a way that allows us to prove such powerful results. \textcite{friedlander_iwaniec_2010} has an enormous discussion on the matter and it is mostly elementary but I think the text is a little difficult for a non-enthusiast.
			\item The reason I include sieve theory at all in this book is that this is the strongest and most interesting area in all of number theory. I will explain further. The development in recent number theory has been a little slow in comparison to the previous century. Brun's theorem on twin primes and Chen's theorem on almost primes related to Goldbach conjecture are still two of the most spectacular results in all of mathematics. Yet both of them are really old and I do not know of any improvements over these results that are of any real significance. \item Brun's theorem is of incredible historical importance; being the starting point of sieve methods today despite being over 100 years old. A story goes that Erd\H{o}s was asked what he thought the strongest theorem was in elementary number theory. His response was Brun's theorem on twin prime pairs. Indeed, one can see that the result of Viggo Brun on twin primes is still the most spectacular result regarding twin primes which requires no analysis or deep results. \textcite[Chapter VI]{friedlander_iwaniec_2010} named their chapter on Brun's theorem \textit{Brun’s Sieve--The Big Bang}. It just goes to show how beautiful this result really is and I believe this theorem is the most underrated result in all of mathematics. Another story goes that Landau had been sitting on Brun's paper for 8 years, mostly due to the use of difficult notations by Brun. Later, Landau dedicated an entire chapter in his \textit{Elementaren Zahlentheorie}, volume I.1 of \textcite{landau_1927} to Brun's theorem. I personally believe this story to be true, and that Landau did this out of guilt that he had deprived the mathematics world from such influential results for so long. The other result, Chen's theorem is based on Selberg's sieve that states that an even number greater than 2 is the sum of a prime and an \textit{almost prime} (product of two primes). To my knowledge, this is still the best result available related to Goldbach's conjecture despite being $\sim$60 years old. As you can see, the most influential results related to the oldest problems in number theory are actually fruits of sieve methods and quite old. This goes to show how difficult it is to improve on sieve methods.
			\item I will discuss two elementary proofs of the prime number theorem. Again, this begs the question: \textit{exactly what do we consider to be elementary?} which will be answered below. Both proofs will be included in \autoref{ch:pnt}.
			\item I initially wanted to discuss basic complex analysis with connection to the convergence of Dirichlet series but later decided not to include it at all. It simply does not go with the spirit of this book. Similarly, I did not follow \textcite{apostol_1976} and discuss Dirichlet characters from a more general point of view using group theory.
			\item The reader may omit \autoref{ch:dispute} entirely given that it is more of an opinion of mine than an actual mathematical discussion. The reason behind including this chapter is that I believe if this dispute had not occurred, we might have had a few more influential discoveries like the elementary proof of the prime number theorem from the collaboration of Erd\H{o}s and Selberg. It was a crime that we were deprived of further collaboration between these two mathematical giants just because some third party that did not even witness the incidents first hand poked their noses where they did not belong; which consequently drove a wedge between Erd\H{o}s and Selberg. It will be clear why I feel so strongly on the matter in the respective chapter. Even though I say this is purely my opinion, proper references will be provided for the history along with some relevant information such as letters between parties involved. I will attach the letters in their original form purely because of historical reasons and also add the corresponding textual versions since they can be difficult to read occasionally. Thus, despite this chapter being a personal opinion, the reader will have some (if not all) necessary relevant evidences that are currently available to me so everyone can draw their own conclusions.
		\end{enumerate}
	I will now explain what I mean by elementary. My initial thought on elementary is that a result is elementary if it only involves what we learn in grades 1-12 (that is, before undergraduate study starts since the number of grades may differ depending on what country the reader is from). In that sense, basic calculus such as differentiation or integration is elementary. I believe this is an opinion mathematicians will share in general. For example, \textcite{landau_1969}, \textcite{ingham_1932} also consider basic integration along with basic properties of zeta functions to be elementary. I should warn the reader that elementary does not imply simplicity. In reality, it is often the exact opposite. Very frequently what we can prove by the use of deep/analytic methods can also be proven by elementary means, but with much more difficulty and an even greater amount of effort. The best example to demonstrate this is the elementary proof of prime number theorem by Selberg and Erd\H{o}s. Selberg stated in his paper of the elementary proof of the prime number theorem that the proof used only the \textit{simplest properties of logarithm}. And yet it took humanity over 150 years to produce an elementary proof of this theorem and a joint effort of two of the biggest mathematical giants of twentieth century. More context and specific details will be provided on this matter in \autoref{ch:dispute}, \nameref{ch:dispute} which will shed light on why this was such a difficult task.
	\begin{flushright}
		{\itshape Masum Billal}\\
		4:03 AM, 13 May, 2022
	\end{flushright}
	\subsection*{Prerequisites}
	As for the prerequisites of this book, a fair introduction to number theory is necessary. There are many great texts that cover the basics that would suffice for this purpose; so I am not specifying any in particular. However, I have to state that the theory barely matters here. What matters is how well someone can make sense of the theories. I will go into detail using a particular example. Usually most students learn how to calculate greatest common divisor and least common multiple by the time they are in grade 5 or 6. For example, usually in grade 4 or 5 they are taught how to compute the greatest common divisor using Euclid's division algorithm; where one keeps dividing by the smaller number until 0 is reached. Once 0 is found as remainder, the divisor is the greatest common divisor. I prioritize on students making sense of why this division works rather than just using this method as a technique and knowing that this works. In practice, most students are unable to make sense of why this works during their lifetime. The point here is that; there is a way to make sense of it that even a 5th grader can think of. And yet none of the students I have asked this question have ever been able to explain to me why this makes sense. The best answer I get uses prime factorization and computing greatest common divisor from there. If the reader has never thought about this before, it is recommended that the reader tries this before moving on with the book. This is to make the reader understand what is more important for understanding number theory. It does not matter how much someone knows, if they are unable to make sense of it. I think of it like a bottleneck; to the effect that regardless of the volume inside bottle, the output when pouring will still be limited by the size of the cork that prevents the contents from flowing out.
	\frontmatter
    \tableofcontents
    \subfile{nomencl.tex}
    \printnomenclature
    %\renewcommand{\thechapter}{\arabic{chapter}}
    \mainmatter
    \pagestyle{fancy}
	%\renewcommand{\thechapter}{\arabic{chapter}}
	\setcounter{chapter}{0}
	\subfile{arith.tex}
	\subfile{zeta.tex}
	\subfile{dirichlet.tex}
	\subfile{genconv.tex}
	\subfile{tchebycheff.tex}
	\subfile{prime.tex}
	\subfile{legendre.tex}
	\subfile{pnt.tex}
	\subfile{sieve.tex}
	\subfile{dispute}
	
	\backmatter
	\printglossary[title=Glossary,]
	\printbibliography[type=article,title=Articles,]
	\printbibliography[filter=books,title=Books,]
	%\printbibliography[type=inbook,title=Chapters/Sections in Books,heading=bibnumbered]
    \printindex
\end{document}