\documentclass[12pt,]{book}

\usepackage{amsmath,amssymb,amsthm}
\usepackage[left=.8in,right=.8in,top=.5in,]{geometry}
\usepackage{xcolor,color,fancyhdr,relsize}
\usepackage{subfiles}

\usepackage[]{titletoc,fmtcount,tocloft}

\renewcommand{\thechapter}{\Numberstring{chapter}}
\renewcommand{\contentsname}{\parbox{\linewidth}{\centerline{\LARGE CONTENTS}~\\[-1.5cm]}}

\renewcommand{\thesection}{$\S$\Roman{section}\hspace{.1em}:\hspace{.2em}}
%\addtolength{\cftchapnumwidth}{70pt}
\addtolength{\cftsecnumwidth}{30pt}


\makeatletter
\renewcommand*\l@chapter[2]{%
	\ifnum \c@tocdepth >\m@ne\relax
	\addpenalty{-\@highpenalty}%
	\addvspace{1.0em \@plus\p@}%
	\setlength\@tempdima{3em}%
	\begingroup
	\def\numberline##1{\bfseries\xdef\@chapternumber{##1}}%
	\setbox0=\vbox{\centering\strut #1}% Could be more than one line
	\centering
	\leavevmode
	\hyperlink{\Hy@tocdestname}{\vspace{.5\baselineskip}\bfseries \chaptername\hspace{.5em}\@chapternumber}\\
	\unvbox0
	\par
	\nobreak
	\global\@nobreaktrue
	\everypar{\global\@nobreakfalse\everypar{}}%
	\endgroup
	\fi}
\makeatother

\usepackage{hyperref,titlesec,xifthen,iftex,authoraftertitle,titletoc}
\usepackage[bibstyle=philosophy-modern,citestyle=philosophy-verbose,backend=biber,autopunct,sortcites,]{biblatex}

\hypersetup{linktocpage,unicode,pdfencoding=auto,pdfstartview=,allcolors=black,anchorcolor=black,allbordercolors=black,hidelinks}
\DeclareNameAlias{sortname}{given-family}
\interfootnotelinepenalty=10000

\ifxetex
	\usepackage{unicode-math}
	\newcommand{\fakebold}{1}
	\newcommand{\fakestretch}{.95}
	\newcommand{\scale}{1.0}
	\newcommand{\fakemathbold}{1}
	\setmainfont[FakeBold=\fakebold,ItalicFont=ModernMT-ExtendedItalic-New.otf,ItalicFeatures={FakeBold=\fakebold,},BoldItalicFont=ModernMT-ExtendedItalic-New.otf,SmallCapsFont={OldStandard-Regular.otf},SmallCapsFeatures={Letters=SmallCaps,FakeBold=\fakebold,RawFeature=+smcp,Scale=\scale,FakeStretch=\fakestretch},BoldFont=TheanoModern-Bold.otf,BoldFeatures={FakeBold=1,Scale=\scale,SmallCapsFont=OldStandard-Bold.otf,SmallCapsFeatures={RawFeature=+smcp,Scale=\scale},FakeStretch=\fakestretch},BoldItalicFeatures={FakeBold=3},Scale=\scale,FakeStretch=\fakestretch]{ModernMT-Extended-New.otf}
	\setsansfont[FakeBold=1,Scale=\scale,FakeStretch=\fakestretch]{Latin Modern Sans}
	\setmonofont[FakeBold=1,Scale=\scale,FakeStretch=\fakestretch]{Latin Modern Mono}
	\setmathfont[,Scale=\scale,FakeStretch=\fakestretch]{NewCMMath-Regular.otf}% KpMath-Regular.otf,KpMath-Light.otf
	
	\setmathfont[range={it,},FakeBold=\fakemathbold,Scale=\scale,FakeStretch=\fakestretch]{ModernMT-ExtendedItalic-New.otf}
	\setmathfont[range={up,},FakeBold=\fakemathbold,Scale=\scale,FakeStretch=\fakestretch]{ModernMT-Extended-New.otf}
	\setmathfont{latinmodern-math.otf}[range={bfup,},FakeBold=\fakemathbold,Scale=\scale,FakeStretch=\fakestretch]
	\setmathfont{NewCMMath-Regular.otf}[range={"0028,"0029,"005B,"005D,"2308-"230B,"005B,"005D,"003A,"003B,"002C,\symfrak,"003D,bb,},FakeStretch=1.1\fakestretch]% NewCMMath-Regular.otf,texgyrepagella-math.otf
	%\setmathfont{OldStandard-Regular.otf}[range={\partial,"00A7,},FakeBold=\fakemathbold,Scale=\scale,FakeStretch=\fakestretch]
	%\setmathfont{ModernExtT-Theano.otf}[range={"03BB,up/{greek},},FakeBold=\fakemathbold,Scale=\scale,FakeStretch=\fakestretch]
	\setmathfont{OldStandard-Regular.otf}[range={"2264-"2267,"003C-"003E,"00A7,},FakeBold=\fakemathbold,]
	
	\newfontfamily{\sumfont}{NotoSerifDisplay-Italic.ttf}[]% GFSSolomos.otf,lmroman17-regular.otf,lmromanslant17-regular.otf,Theano Didot Regular V1.otf
	\makeatletter
	\RenewDocumentCommand{\sum@}{}{\DOTSB\baskervillesum}
	\AtBeginDocument{%
		\RenewDocumentCommand{\sum}{}{\mathop{\sum@}\slimits@}%
	}
	\NewDocumentCommand{\baskervillesum}{}{%
		\mathchoice
		{\makebaskervillesum{2.1}}% displaystyle
		{\makebaskervillesum{1.4}}% textstyle
		{\makebaskervillesum{1}}% scriptstyle
		{\makebaskervillesum{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervillesum}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\sumfont Σ}}}%
	}
	\newfontfamily{\prodfont}{ModernExtT-Theano.otf}[FakeStretch=1.1]%OldStandard-Italic.otf,ModernExtT-Theano.otf
	\makeatletter
	\RenewDocumentCommand{\prod@}{}{\DOTSB\baskervilleprod}
	\AtBeginDocument{%
		\RenewDocumentCommand{\prod}{}{\mathop{\prod@}\slimits@}%
	}
	\NewDocumentCommand{\baskervilleprod}{}{%
		\mathchoice
		{\makebaskervilleprod{1.6}}% displaystyle
		{\makebaskervilleprod{1.2}}% textstyle
		{\makebaskervilleprod{1}}% scriptstyle
		{\makebaskervilleprod{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervilleprod}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\prodfont ∏}}}%
	}
	\newfontfamily\intfont{latinmodern-math.otf}[FakeBold=0]% OldStandard-Italic.otf,latinmodern-math.otf,Erewhon-Math.otf
	\makeatletter
	\NewDocumentCommand{\int@}{}{\DOTSB\baskervilleint}
	\AtBeginDocument{%
		\RenewDocumentCommand{\int}{}{\mathop{\int@}\slimits@}%
	}
	\NewDocumentCommand{\baskervilleint}{}{%
		\mathchoice
		{\makebaskervilleint{1.6}}% displaystyle
		{\makebaskervilleint{1.2}}% textstyle
		{\makebaskervilleint{1}}% scriptstyle
		{\makebaskervilleint{0.7}}% scriptscriptstyle
	}
	\NewDocumentCommand{\makebaskervilleint}{m}{%
		\vcenter{\hbox{\scalebox{#1}{\intfont ∫}}}%
	}
	\defaultfontfeatures{Mapping=tex-text,Ligatures=Tex}
\else
	\usepackage{pdfrender, xcolor}
	\usepackage[T1]{fontenc}
	\usepackage{baskervillef}
	\usepackage[baskerville]{newtxmath}
	\pdfrender{StrokeColor=black,TextRenderingMode=2,LineWidth=0.2pt}
	\makeatletter\let\normalrender\PdfRender@NormalColorHook\let\PdfRender@NormalColorHook\@empty\newcommand*{\textnormalrender}[1]{\begingroup\normalrender#1\endgroup}\makeatother
\fi

\usepackage[nopostdot,automake=true,nonumberlist,order=word]{glossaries}
\usepackage{makeidx}

\usepackage{nomencl}
\renewcommand{\nomname}{Notations}
\makenomenclature
\makeindex
\makeglossaries

\titleformat{\chapter}[display]{\bfseries\scshape\Huge}{}{1ex}{\centering\titlerule\vspace{1ex}\ifthenelse{\value{chapter}>0}{}{}}[\vspace{1ex}\titlerule]
\titleformat{\section}[display]{\bfseries\scshape\LARGE}{}{1ex}{\centering\ifthenelse{\value{section}>0}{\thesection\;}{}}[\titlerule]
\titleformat{\subsection}[display]{\bfseries\scshape\Large}{}{1ex}{\centering\ifthenelse{\value{section}>0}{$\S\S$\thesubsection\;}{}}[\titlerule]

\newtheorem{theorem}{\textsc{\textbf{Theorem}}}
\theoremstyle{definition}
\newenvironment{definition}[1][]{\par\medskip\noindent \textsc{\textbf{{\ifthenelse{\isempty{#1}}{Definition.}{#1.}}}} \rmfamily}{\medskip}

\newcommand{\floor}[1]{\left\lfloor{#1}\right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil{#1}\right\rceil}
\newcommand{\parenthesis}[1]{\left(#1\right)}
\newcommand{\curlybrace}[1]{\left\{#1\right\}}
\newcommand{\squarebracket}[1]{\left[#1\right]}
\newcommand{\bigo}[1]{O\parenthesis{#1}}
\DeclareMathOperator{\ord}{ord}
\newcommand{\F}[1]{\mathbb{F}_{#1}}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}

\renewcommand*{\chapterautorefname}{Chapter}
\renewcommand*{\sectionautorefname}{Section}
\renewcommand*{\subsectionautorefname}{Subsection}

\renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
\renewcommand{\sectionmark}[1]{\markboth{#1}{#1}}

\fancypagestyle{fancy}{
	\fancyhf{}
	\fancyhead[CE]{\small\textit{{\MyAuthor}}}
	\fancyfoot[LE,RO]{\thepage}
	\fancyhead[CO]{\small Chapter \thechapter,\hspace{.4em}\thesection\hspace{.1em}\nouppercase\rightmark}
}
%\setlength{\headheight}{30pt}

\newtheorem*{remark}{\textit{Remark}}

\title{ELEMENTARY ANALYTIC NUMBER THEORY}
\author{Masum Billal}
\date{}
\defbibfilter{books}{type=book or type=inbook}

\usepackage{graphicx,}

\addbibresource{ref.bib}
\subfile{glossary.tex}

\begin{document}
	\pagestyle{empty}
	%\AddToShipoutPictureBG{{\includegraphics{Texture13-1.jpg}}}
	%\pagecolor{platinum}
	\relsize{1.05}
	\maketitle
	\frontmatter
    \tableofcontents
    \subfile{nomencl.tex}
    \printnomenclature
    %\renewcommand{\thechapter}{\arabic{chapter}}
    \mainmatter
    \pagestyle{fancy}
	%\renewcommand{\thechapter}{\arabic{chapter}}
	\setcounter{chapter}{0}
	\subfile{arith.tex}
	\subfile{zeta.tex}
	\subfile{dirichlet.tex}
	\subfile{genconv.tex}
	\subfile{tchebycheff.tex}
	\subfile{prime.tex}
	\subfile{sieve.tex}
	
	\backmatter
	\printglossary[title=Glossary,]
	\printbibliography[type=article,title=Articles,]
	\printbibliography[filter=books,title=Books,]
	%\printbibliography[type=inbook,title=Chapters/Sections in Books,heading=bibnumbered]
    \printindex
\end{document}