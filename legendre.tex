\documentclass[elemannt.tex]{subfile}

\begin{document}
	\chapter{Two Elementary Proofs of Legendre-Dirichlet Prime Number Theorem}\label{ch:legendre}
	\textcite[pp. 241]{euler_1783} proved that the sequence ${a+nd}$ contains infinitely many primes for $a=1$. This can be proven using cyclotomic polynomials (see \textcite[$\S1.4$, Theorem 1.47]{billal_riasat_2021}). \textcite[pp. 404]{legendre_1798} conjectured that ${a+nd}$ contains infinitely many primes when $\gcd(a,d)=1$ although failed to prove it as \textcite[$\S29$, pp. $505-508$]{gauss_1801} noted. \textcite{dirichlet_1837} proved in his famous paper that $a+nd$ contains infinitely many primes though the proof is complete only when $d$ is a prime. \textcite{dirichlet_1839} (also see \textcite{dirichlet_1897_28}) completes this proof with Dirichlet's class number formula. This is why today it is known as \index{Dirichlet's theorem on arithmetic progression}\textit{Dirichlet's theorem on arithmetic progression} or \textit{Dirichlet's prime number theorem}.
	\section{Dirichlet Characters}
	Dirichlet's idea of proving Legendre's conjecture essentially comes from Euler's proof of the divergence of the sum of reciprocal of primes, except Dirichlet wanted to prove the same when restricted by the constraint that $p\equiv a\pmod{k}$. Euler's proof gives us another way to prove there are infinitely many primes because the sum of reciprocals of primes diverge. If there were finitely many primes, that would not be the case. So, if we could prove
		\begin{align*}
			\sum_{p\equiv a\pmod{k}}\frac{1}{p}
		\end{align*}
	diverges as well, the theorem would be complete. This is where Dirichlet introduced the crucial idea of \textit{characters}. The motivation Dirichlet had was to define a \textit{periodic} function in a certain way that would allow one to
		\begin{enumerate}
			\item differentiate when $a$ is relatively prime to $k$.
			\item behaves the same as the reduced set of residues $\pmod{k}$.
			\item behaves the same as the complex roots of unity (this is actually very important, for example, the sum of all roots of unity is $0$.)
			\item can differentiate when $b\equiv a\pmod{k}$ for $\gcd(a,k)=1$.
		\end{enumerate}
	The intuition behind finding a periodic function is to note that $\gcd(a,k)=1$ implies $\gcd(a+k,k)=1$. As we will see later, Dirichlet characters satisfy all of these properties. It will become apparent later how and why they play such a crucial role. \textcite[pp. 186]{legendre_1798} defined the \textit{Legendre symbol} which plays a pivotal role in elementary number theory. \textcite{jacobi_1846} generalized Legendre symbol which is now known as \textit{Jacobi symbol}. \textcite[pp. 770]{kronecker_1885} generalized this to \textit{Kronecker symbol} which is unfortunately less known today. This is because \textcite{dirichlet_1837} had already introduced (also see \textcite{dirichlet_1897_21}) a generalization of Kronecker symbol which is far more insightful. Let $k$ be a fixed positive integer.
		\begin{definition}[Dirichlet Character]
			An arithmetic function $\chi$ is called a \index{Dirichlet character}\textit{character} $\pmod{k}$ if
				\begin{enumerate}
					\item $\chi(a)=0$ if $\gcd(a,k)>1$.
					\item $\chi(1)\neq0$.
					\item $\chi(ab)=\chi(a)\chi(b)$ for all positive integers $a,b$.
					\item $\chi(a)=\chi(b)$ if $a\equiv b\pmod{k}$.
				\end{enumerate}
		\end{definition}
	Note that Legendre symbol $\qr{a}{p}$ for prime $p$, Jacobi symbol $\qr{a}{n}$ and Kronecker symbol $\qr{a}{l}$ are all characters $\pmod{p},\pmod{n}$ and $\pmod{l}$ respectively where $p$ is prime, $n$ is a positive integer and $l\equiv0,1\pmod{4}$ for square-free $l$. Another example of $\chi$ is $\chi(n)=0$ for $n\equiv0,2\pmod{4}$, $\chi(n)=1$ for $n\equiv1\pmod4$ and $\chi(n)=-1$ for $n\equiv3\pmod{4}$. Obviously, $\chi$ is completely multiplicative; hence $\chi(1)=1$.

	It is still not entirely clear how $\chi$ satisfies the properties we mentioned above. The next three theorems show why $\chi(n)$ behaves like complex roots of unity.
		\begin{proposition}
			If $\gcd(n,k)=1$, then $\chi(n)^{\varphi(k)}=1$. So $\chi(n)$ is actually a complex number which is an $\varphi(k)$-th root of unity and $|\chi(n)|=1$.
		\end{proposition}

		\begin{proof}
			From Euler's theorem,
				\begin{align*}
					n^{\varphi(k)}
						& \equiv1\pmod{k}
				\end{align*}
			So, $\chi(n)^{\varphi(k)}=\chi(n^{\varphi(k)})=\chi(1)=1$.
		\end{proof}

		\begin{definition}[Principal character]
			$\chi_{0}(n)=1$ when $\gcd(n,k)=1$ is the \textit{principal character} $\pmod{k}$. If $\gcd(n,k)>1$, $\chi_{0}(n)=0$.
		\end{definition}
	Since the characters $\pmod{k}$ are complex roots of unity, the complex conjugate of $\chi(n)$, $\bar{\chi(n)}$ is also a root of unity, hence; the following.
		\begin{proposition}
			If $\chi(n)$ is a character $\pmod{k}$, $\bar{\chi(n)}$ is also a character $\pmod{k}$.
		\end{proposition}

		\begin{proposition}\label{pro:sum-for-residues}
			For any Dirichlet character $\chi$,
				\begin{align*}
					\sum_{0\leq a\leq k-1}\chi(a)
						& =
							\begin{cases}
								\varphi(k)& \mbox{ if }\chi=\chi_{0}\\
								0& \mbox{ otherwise}
							\end{cases}
				\end{align*}

		\end{proposition}

		\begin{proof}
			If $\chi(n)=\chi_{0}(n)$ is the principal character, then
				\begin{align*}
					\sum_{i=0}^{k-1}\chi_{0}(i)
						& = \sum_{\substack{i=0\\\gcd(i,k)=1}}^{k-1}\chi_{0}(i)+\sum_{\substack{i=0\\\gcd(i,k)>1}}^{k-1}\chi_{0}(i)\\
						& = \sum_{\substack{i=0\\\gcd(i,k)=1}}^{k-1}1\\
						& = \varphi(k)
				\end{align*}
			If $\chi(n)$ is not the principal character, for any $l$ prime to $k$ such that $\chi(l)\neq1$, the set of residues $\{i: 1\leq i\leq k-1\}$ and $\{il:1\leq i\leq k-1\}$ coincide. Then
				\begin{align*}
					\sum_{i=1}^{k-1}\chi(i)
						& = \sum_{i=1}^{k-1}\chi(il)\\
						& = \sum_{i=1}^{k-1}\chi(i)\chi(l)\\
						& = \chi(l)\sum_{i=1}^{k-1}\chi(i)
				\end{align*}
			Since $\chi(l)\neq1$,
				\begin{align*}
					\sum_{i=1}^{k-1}\chi(i)
						& = 0
				\end{align*}
		\end{proof}
	The next two theorems show why $\chi$ behaves like a complete/reduced set of residues.
		\begin{proposition}\label{pro:product-character}
			If $\chi_{1}(n)$ and $\chi_{2}(n)$ are both characters, then so is $\chi_{1}(n)\chi_{2}(n)$.
		\end{proposition}

		\begin{proof}
			Left as an exercise.
		\end{proof}

		\begin{proposition}\label{pro:char-perm}
			If $\chi'(n)$ is a character and $\chi(n)$ runs over all characters of $k$, $\chi'(n)\chi(n)$ runs over all characters of $k$ as well.
		\end{proposition}

		\begin{proof}
			If $\gcd(n,k)\neq1$, $\chi'(n)\chi(n)$ and $\chi(n)$ both are $0$. For $\gcd(n,k)=1$, if $\chi'(n)\chi(n)=\chi''(n)\chi'(n)$ then $\chi(n)=\chi''(n)$ since neither is $0$. By \autoref{pro:product-character}, $\chi(n)\chi'(n)$ produces $\varphi(k)$ different characters so are a permutation of the original characters $\chi'(n)$.
		\end{proof}

		\begin{proposition}\label{pro:char-not-one}
			If $a$ is a positive integer prime to $k$ such that $a\not\equiv1\pmod{k}$, then there exists a character $\chi(a)\neq1$.
		\end{proposition}

		\begin{proof}
			If $p$ is a prime divisor of $k$ and $k=p^{e}l$ such that $p\nmid l$ then $p\nmid a$. For any $e$, there exists a primitive $\lambda(p^{e})$-th root $g\pmod{p^{e}}$ where $\lambda(n)$ is Carmichael's universal exponent function (see \textcite[pp. 90]{billal_riasat_2021}). For any $a$ not divisible by $p$, there is a unique non-negative integer $u$ not exceeding $\lambda(p^{e})$ such that
				\begin{align*}
					a
						& \equiv g^{u}\pmod{p^{e}}
				\end{align*}
			Setting $\zeta:=\exp\left(\frac{2i\pi}{\lambda(p^{e})}\right)$ and $\chi(a)=\zeta^{u}$, we can easily see for $a\equiv g^{u}\pmod{p^{e}}$ and $b\equiv g^{v}\pmod{p^{e}}$,
				\begin{align*}
					ab
						& \equiv g^{u+v}\pmod{p^{e}}\\
					\chi(ab)
						& = \zeta^{u+v}\\
						& =\zeta^{u}\zeta^{v}\\
						& = \chi(a)\chi(b)
				\end{align*}
			The other properties are trivially satisfied. Now it remains to see that for $a\not\equiv1\pmod{k}$, if $a\equiv g^{u}\pmod{p^{e}}$ then $\lambda(p^{e})\nmid u$ so $\zeta^{u}\neq1$.
		\end{proof}

		\begin{proposition}\label{pro:sum-for-char}
			If $C(k)$ is the number of characters $\pmod{k}$, then
				\begin{align*}
					\sum_{\chi}\chi(a)
						& =
							\begin{cases}
								C(k)\mbox{ if }a\equiv1\pmod{k}\\
								0\mbox{ otherwise}
							\end{cases}
				\end{align*}
			where the sum ranges through all the characters.
		\end{proposition}

		\begin{proof}
			If $a\equiv1\pmod{k}$,
				\begin{align*}
					\sum_{\chi}\chi(a)
						& = \sum_{\chi}1\\
						& = C(k)
				\end{align*}
			If $\gcd(a,k)>1$, then $\chi(a)=0$ for all $\chi$ so $\sum_{\chi}\chi(a)=0$. Now, $\gcd(a,k)=1$ and $a\not\equiv1\pmod{k}$. By \autoref{pro:char-not-one}, there is a character $\chi'$ such that $\chi'(a)\neq1$. By \autoref{pro:char-perm},
				\begin{align*}
					\sum_{\chi}\chi(a)
						& = \sum_{\chi}\chi(a)\chi'(a)
				\end{align*}
			Since $\chi'(a)\neq1$, we have $\sum_{\chi}\chi(a)=0$.
		\end{proof}

		\begin{proposition}
			There are $\varphi(k)$ characters $\pmod{k}$.
		\end{proposition}

		\begin{proof}
			If $\chi$ runs through all the characters, by \autoref{pro:sum-for-char}
				\begin{align*}
					\sum_{i=0}^{k-1}\sum_{\chi}\chi(i)
						& = 0+\sum_{\chi}\chi(1)+\sum_{i=2}^{k-1}\sum_{\chi}\chi(i)\\
						& = C(k)
				\end{align*}
			On the other hand, by \autoref{pro:sum-for-residues}
				\begin{align*}
					\sum_{i=0}^{k-1}\sum_{\chi}\chi(i)
						& = \sum_{i=0}^{k-1}\chi_{0}(i)+\sum_{i=0}^{k-1}\sum_{\substack{\chi\\\chi\neq\chi_{0}}}\chi(i)\\
						& = \varphi(k)
				\end{align*}
			Thus, $C(k)=\varphi(k)$.
		\end{proof}

		\begin{proposition}
			Let $l$ be a positive integer prime to $k$. Then for a positive integer $a$,
				\begin{align*}
					\sum_{\chi}\dfrac{\chi(a)}{\chi(l)}
						& =
							\begin{cases}
								\varphi(k)\mbox{ if }a\equiv l\pmod{k}\\
								0\mbox{ otherwise}
							\end{cases}
				\end{align*}
		\end{proposition}

		\begin{proof}
			Let $t$ be a positive integer such that $lt\equiv1\pmod{k}$. Such $t$ exists since $l$ is prime to $k$. Then $\chi(l)\chi(t)=\chi(lt)=\chi(1)=1$.
				\begin{align*}
					\sum_{\chi}\dfrac{\chi(a)}{\chi(l)}
						& = \sum_{\chi}\chi(a)\chi(t)\\
						& = \sum_{\chi}\chi(at)
				\end{align*}
			According to \autoref{pro:sum-for-residues}, if $at\equiv1\pmod{k}$, then $\sum_{\chi}\chi(at)=\varphi(k)$ otherwise $\sum_{\chi}\chi(at)=0$. Since $at\equiv1\equiv lt\pmod{k}$ and $\gcd(t,k)=1$, we have $a\equiv l\pmod{k}$.
		\end{proof}

		\begin{definition}
			$\chi$ is a \textit{character of the first kind} if $\chi=\chi_{0}$ is the principal character. If $\chi$ is real but not principal, then $\chi$ is a \textit{character of the second kind}. Otherwise, $\chi$ can sometimes be complex and called \textit{character of the third kind}.
		\end{definition}
	The next result is a very crucial one and was the intuition behind defining a function like $\chi$ with the properties we discussed.
		\begin{proposition}
			If $\chi$ is not a character of the first kind, then $\sum_{i=a}^{b}\chi(i)\leq \frac{\varphi(k)}{2}$ for $1\leq a\leq b$.
		\end{proposition}

		\begin{proof}
			Notice that, $\sum_{i=0}^{k-1}\chi(i)=0$ if $\chi$ is not of the first kind. So we can only consider $1\leq a\leq b\leq a+k-1$. Also, $|\chi(a)|=1$ for $\varphi(k)$ residues that prime to $k$. If the number of residues $i$ for which $|\chi(i)|=1$ and $a\leq i\leq b$ does not exceed $\frac{\varphi(k)}{2}$, then we are done. Otherwise, there are more than $\frac{\varphi(k)}{2}$ residues $i$ for which $|\chi(i)|=1$ and $a\leq i\leq b$. In that case, the number of residues $i$ for which $|\chi(i)|=1$ and $b+1\leq i\leq a+k-1$ does not exceed $\frac{\varphi(k)}{2}$.
				\begin{align*}
					\sum_{i=a}^{b}\chi(a)
						& = \sum_{i=a}^{a+k-1}\chi(i)-\sum_{i=b+1}^{a+k-1}\chi(i)
				\end{align*}
			Since $\sum_{i=a}^{a+k-1}\chi(i)=0$,
				\begin{align*}
					\left|\sum_{i=a}^{b}\chi(a)\right|
						& = \left|\sum_{i=b+1}^{a+k-1}\chi(i)\right|\\
						& < \frac{\varphi(k)}{2}
				\end{align*}
		\end{proof}
	\section{Dirichlet's \textit{L}-Series}
	We mentioned earlier that Riemann considered $\zeta(s)$ for complex $s$. Here, we do something similar except we do not require any complex analysis except for the most basic facts.
		\begin{definition}[$L$-Series]
			Let $s$ be a complex number. If $k$ is a positive integer and $\chi$ is a character $\pmod{k}$, Dirichlet's $L$-series $L(\chi,s)$ associated with $\chi$ and $s$ is defined as
				\begin{align*}
					L(\chi, s)
						& = \sum_{a\geq 1}\dfrac{\chi(a)}{a^{s}}
				\end{align*}
		\end{definition}
	So, $L$-series is the \nameref{def:euler-product} when $f(n):=\chi(n)$. Since $\chi$ is completely multiplicative, using properties of Euler product, we immediately have the following.
		\begin{proposition}
			For a complex $s$ and a character $\chi$,
				\begin{align*}
					L(\chi, s)
						& = \prod_{p}\dfrac{1}{1-\dfrac{\chi(p)}{p^{s}}}
				\end{align*}
		\end{proposition}

		\begin{proposition}
			For any of $\varphi(k)$ characters $\chi$ and complex number $s$ with $\mathfrak{R}(s)>1$, $L(\chi, s)$ converges.
		\end{proposition}

		\begin{proof}
			For a complex number $s=\sigma+it$ and $a=e^{b}$, $|a^{s}|=a^{\sigma}|a^{it}|=a^{\sigma}|e^{bit}|$. Since $e^{ix}=\cos{x}+i\sin{x}$, $|e^{ix}|=\cos^{2}{x}+\sin^{2}{x}=1$. Thus, $|a^{s}|=a^{\sigma}$ and by triangle inequality,
				\begin{align*}
					|L(\chi,s)|
						& = \left|\sum_{a\geq 1}\dfrac{\chi(a)}{a^{s}}\right|\\
						& \leq \sum_{a\geq 1}\left|\dfrac{\chi(a)}{a^{s}}\right|\\
						& = \sum_{a\geq 1}\dfrac{|\chi(a)|}{a^{\sigma}}\\
						& \leq \sum_{a\geq 1}\dfrac{1}{a^{\sigma}}\\
						& = \zeta(\sigma)
				\end{align*}
			If $\sigma > 1$, then $\zeta(\sigma)$ converges, hence, so does $L(\chi, s)$.
		\end{proof}

		\begin{proposition}\label{pro:second-char-geq1}
			If $\chi$ is a character of the second kind and
				\begin{align*}
					\varsigma(n)
						& = \sum_{d\mid n}\chi(d)
				\end{align*}
			Then $\varsigma(n)\geq 0$ for all $n$ and $\varsigma(n)\geq 1$ for square $n$.
		\end{proposition}

		\begin{proof}
			Since $\chi$ is completely multiplicative and $\varsigma$ is the summatory function on divisors, $\varsigma$ is multiplicative also. So we mainly need to look at
				\begin{align*}
					\varsigma(p^{e})
						& = \sum_{d\mid p^{e}}\chi(d)\\
						& = 1+\sum_{i=1}^{e}\chi(p^{i})\\
						& = 1+\sum_{i=1}^{e}(\chi(p))^{i}
				\end{align*}
			If $\chi(p)=0$, then $\varsigma(p^{e})=1$. If $\chi(p)=1$, then $\varsigma(p^{e})=e+1$. Otherwise $\chi(p)=-1$ so $\varsigma(p^{e})=1$ if $e$ is even or $\varsigma(p^{e})=0$ if $e$ is odd. If $n=p_{1}^{e_{1}}\cdots p_{r}^{e_{r}}$, then $\varsigma(n)=\varsigma(p_{1}^{e_{1}})\cdots\varsigma(p_{r}^{e_{r}})$. Since each $\varsigma(p_{i}^{e_{i}})\geq0$, we have $\varsigma(n)\geq0$ and if $n$ is square, then $e_{i}$ is even for $1\leq i\leq r$ so $\varsigma(p_{i}^{e_{i}})\geq 1$ and $\varsigma(n)\geq1$.
		\end{proof}

		\begin{proposition}
			If $\chi$ is of the second kind, then $L(1,\chi)\neq0$.
		\end{proposition}
	\textcite[pp. 122, Theorem 152]{landau_1969} says the following about this theorem:
		\begin{quote}
			This is the deepest of all of the lemmas that are necessary for Dirichlet's proof. Dirichlet proved it only by the considerably roundabout method of using the so-called theory of the class number of quadratic forms.
		\end{quote}

		\begin{proof}
			Let
				\begin{align*}
					\varUpsilon(x)
						& = \sum_{n\leq x}\dfrac{\varsigma(n)}{\sqrt{n}}
				\end{align*}
			By \autoref{pro:second-char-geq1}, $\varsigma(n)\geq 1$ for square $n$, so
				\begin{align*}
					\varUpsilon(x)
						& \geq \sum_{n\leq\sqrt{x}}\dfrac{1}{n}
				\end{align*}
			Clearly $\varsigma(x)\to\infty$ as $x\to\infty$. Now,
				\begin{align*}
					\varUpsilon(x)
						& = \sum_{n\leq x}\dfrac{\sum_{d\mid n}\chi(d)}{\sqrt{n}}\\
						& = \sum_{de\leq x}\dfrac{\chi(d)}{\sqrt{de}}
				\end{align*}
			We can use \nameref{thm:hyperbola} with $a=b=\sqrt{x}, f(n)=\frac{\chi(n)}{\sqrt{n}}$ and $g(n)=\frac{1}{\sqrt{n}}$.
				\begin{align*}
					\varUpsilon(x)
						& = \sum_{n\leq\sqrt{x}}\dfrac{\chi(n)}{\sqrt{n}}\func{G}{\dfrac{x}{n}}+\sum_{n\leq \sqrt{x}}\dfrac{1}{\sqrt{n}}\func{F}{\dfrac{x}{n}}-F(\sqrt{x})G(\sqrt{x})
				\end{align*}
			where $F(x)=\sum_{n\leq x}f(n)$ and $G(x)=\sum_{n\leq x}g(n)$.
		\end{proof}
	\section{First Proof of Legendre-Dirichlet Theorem}
	\section{Second Proof by Selberg}
\end{document}